(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e){e.exports={test:'@Test\npublic void logsSpanWithCustomPrefix() {\n\tPrintStream sysOut = System.out;\n\n\tByteArrayOutputStream baos = new ByteArrayOutputStream();\n\tPrintStream testOut = new PrintStream(baos);\n\tSystem.setOut(testOut);\n\n\ttestRestTemplate.getForEntity("/hello", String.class);\n\n\tassertThat(baos.toString(), containsString("Logging message"));\n\tassertThat(baos.toString(), containsString("CUSTOM_PATTERN_"));\n\n\tSystem.setOut(sysOut);\n}',impl1:'logging:\n\tpattern:\n\t\tlevel: "${spring.zipkin.service.name:${spring.application.name:-}},CUSTOM_PATTERN_%X{X-B3-TraceId:-},CUSTOM_PATTERN_%X{X-B3-SpanId:-},%X{X-Span-Export:-}"',impl2:'public class CustomTraceContext extends CurrentTraceContext {\n\t// Backward compatibility for all logging patterns\n\tprivate static final String LEGACY_EXPORTABLE_NAME = "X-Span-Export";\n\tprivate static final String LEGACY_PARENT_ID_NAME = "X-B3-ParentSpanId";\n\tprivate static final String LEGACY_TRACE_ID_NAME = "X-B3-TraceId";\n\tprivate static final String LEGACY_SPAN_ID_NAME = "X-B3-SpanId";\n\n\tprivate static final Logger log = LoggerFactory\n\t\t\t.getLogger(CustomTraceContext.class);\n\n\tpublic static CustomTraceContext create() {\n\t\treturn create(CurrentTraceContext.Default.inheritable());\n\t}\n\n\tpublic static CustomTraceContext create(CurrentTraceContext delegate) {\n\t\treturn new CustomTraceContext(delegate);\n\t}\n\n\tfinal CurrentTraceContext delegate;\n\n\tCustomTraceContext(CurrentTraceContext delegate) {\n\t\tif (delegate == null)\n\t\t\tthrow new NullPointerException("delegate == null");\n\t\tthis.delegate = delegate;\n\t}\n\n\t@Override\n\tpublic TraceContext get() {\n\t\treturn this.delegate.get();\n\t}\n\n\t@Override\n\tpublic Scope newScope(@Nullable TraceContext currentSpan) {\n\t\tfinal String previousTraceId = MDC.get("traceId");\n\t\tfinal String previousParentId = MDC.get("parentId");\n\t\tfinal String previousSpanId = MDC.get("spanId");\n\t\tfinal String spanExportable = MDC.get("spanExportable");\n\t\tfinal String legacyPreviousTraceId = MDC.get(LEGACY_TRACE_ID_NAME);\n\t\tfinal String legacyPreviousParentId = MDC.get(LEGACY_PARENT_ID_NAME);\n\t\tfinal String legacyPreviousSpanId = MDC.get(LEGACY_SPAN_ID_NAME);\n\t\tfinal String legacySpanExportable = MDC.get(LEGACY_EXPORTABLE_NAME);\n\n\t\tif (currentSpan != null) {\n\t\t\tString traceIdString = "CUSTOM_PATTERN_" + currentSpan.traceIdString();\n\t\t\tMDC.put("traceId", traceIdString);\n\t\t\tMDC.put(LEGACY_TRACE_ID_NAME, traceIdString);\n\t\t\tString parentId = currentSpan.parentId() != null ?\n\t\t\t\t\tHexCodec.toLowerHex(currentSpan.parentId()) :\n\t\t\t\t\tnull;\n\t\t\treplace("parentId", parentId);\n\t\t\treplace(LEGACY_PARENT_ID_NAME, parentId);\n\t\t\tString spanId = HexCodec.toLowerHex(currentSpan.spanId());\n\t\t\tspanId = "CUSTOM_PATTERN_" + spanId;\n\t\t\tMDC.put("spanId", spanId);\n\t\t\tMDC.put(LEGACY_SPAN_ID_NAME, spanId);\n\t\t\tString sampled = String.valueOf(currentSpan.sampled());\n\t\t\tMDC.put("spanExportable", sampled);\n\t\t\tMDC.put(LEGACY_EXPORTABLE_NAME, sampled);\n\t\t\tlog("Starting scope for span: {}", currentSpan);\n\t\t\tif (currentSpan.parentId() != null) {\n\t\t\t\tif (log.isTraceEnabled()) {\n\t\t\t\t\tlog.trace("With parent: {}", currentSpan.parentId());\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tMDC.remove("traceId");\n\t\t\tMDC.remove("parentId");\n\t\t\tMDC.remove("spanId");\n\t\t\tMDC.remove("spanExportable");\n\t\t\tMDC.remove(LEGACY_TRACE_ID_NAME);\n\t\t\tMDC.remove(LEGACY_PARENT_ID_NAME);\n\t\t\tMDC.remove(LEGACY_SPAN_ID_NAME);\n\t\t\tMDC.remove(LEGACY_EXPORTABLE_NAME);\n\t\t}\n\n\t\tScope scope = this.delegate.newScope(currentSpan);\n\n\t\tclass ThreadContextCurrentTraceContextScope implements Scope {\n\t\t\t@Override\n\t\t\tpublic void close() {\n\t\t\t\tlog("Closing scope for span: {}", currentSpan);\n\t\t\t\tscope.close();\n\t\t\t\treplace("traceId", previousTraceId);\n\t\t\t\treplace("parentId", previousParentId);\n\t\t\t\treplace("spanId", previousSpanId);\n\t\t\t\treplace("spanExportable", spanExportable);\n\t\t\t\treplace(LEGACY_TRACE_ID_NAME, legacyPreviousTraceId);\n\t\t\t\treplace(LEGACY_PARENT_ID_NAME, legacyPreviousParentId);\n\t\t\t\treplace(LEGACY_SPAN_ID_NAME, legacyPreviousSpanId);\n\t\t\t\treplace(LEGACY_EXPORTABLE_NAME, legacySpanExportable);\n\t\t\t}\n\t\t}\n\t\treturn new ThreadContextCurrentTraceContextScope();\n\t}\n\n\tprivate void log(String text, TraceContext span) {\n\t\tif (span == null) {\n\t\t\treturn;\n\t\t}\n\t\tif (log.isTraceEnabled()) {\n\t\t\tlog.trace(text, span);\n\t\t}\n\t}\n\n\tstatic void replace(String key, @Nullable String value) {\n\t\tif (value != null) {\n\t\t\tMDC.put(key, value);\n\t\t} else {\n\t\t\tMDC.remove(key);\n\t\t}\n\t}\n}',"impl2-config":"@Configuration\npublic class AppConfig {\n\t@Bean\n\t@Primary\n\tpublic CurrentTraceContext slf4jSpanLogger() {\n\t\treturn CustomTraceContext.create();\n\t}\n}"}},,,,function(e){e.exports={test:"@SpringBootTest\npublic class McNicholTest{\n\t@Test\n\tpublic void contextLoads(){\n\n\t}\n}",impl:'@SpringBootApplication\npublic class McNichol implements CommandLineRunner{\n\tpublic static void main(String... args){\n\t\tSpringApplication.run(McNichol.class, args);\n\t}\n\n\t@Override\n\tpublic void run (String... args){\n\t\tSystem.out.println("Adventures in naming...");\n\t}\n}'}},function(e){e.exports={test:"package rocks.mcnichol;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class DemoApplicationTests {\n\t@Test\n\tpublic void contextLoads() {\n\n\t}\n}",impl:"package rocks.mcnichol;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(DemoApplication.class, args);\n\t}\n}"}},function(e){e.exports={test:'@RunWith(SpringRunner.class)\n@SpringBooTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class AppControllerIntegrationTest{\n\n\t@Autowired\n\tTestRestTemplate testRestTemplate;\n\n\t@Test\n\tpublic void hasRestControllerAnnotation() {\n\t\tassertTrue(AppController.class.isAnnotationPresent(RestController.class));\n\t}\n\n\t@Test\n\tpublic void helloReturns200() {\n\n\t\tResponseEntity<String> actualResponse = testRestTemplate\n\t\t\t.getForEntity("/hello", String.class);\n\n\t\tassertThat(actualResponse.getStatusCode(), equalTo(HttpStatus.OK));\n\t}\n}',impl:'@RestController\npublic class AppController {\n\tLogger log = LoggerFactory.getLogger(AppController.class);\n\n\t@GetMapping("/hello")\n\tpublic ResponseEntity<String> hello() {\n\t\tlog.info("Logging message");\n\t\treturn new ResponseEntity<>("World", HttpStatus.OK);\n\t}\n}'}},,,,,,function(e,t,n){e.exports=n.p+"static/media/dapper.69844fe4.jpg"},function(e){e.exports={groovy:"buildscript {\n\text {\n\t\tspringBootVersion = '2.0.5.RELEASE'\n\t}\n\n\trepositories {\n\t\tmavenCentral()\n\t}\n\n\tdependencies {\n\t\tclasspath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n\t}\n}\n\napply plugin: 'java'\napply plugin: 'eclipse'\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\n\ngroup = 'rocks.mcnichol'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\n\nrepositories {\n\tmavenCentral()\n}\n\next {\n\tspringCloudVersion = 'Finchley.SR1'\n}\n\ndependencies {\n\timplementation('org.springframework.boot:spring-boot-starter-web')\n\timplementation('org.springframework.cloud:spring-cloud-starter-sleuth')\n\ttestImplementation('org.springframework.boot:spring-boot-starter-test')\n}\n\ndependencyManagement {\n\timports {\n\t\tmavenBom \"org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}\"\n\t}\n}"}},function(e,t,n){e.exports=n(50)},,,,,function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),i=n.n(o),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var c=n(52),p=n(2),u=n(3),h=n(5),g=n(4),m=n(6),d=n(54),f=(n(29),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"title-bar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.a,{exact:!0,to:"/",activeClassName:"active"},"Home")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/blog",activeClassName:"active"},"Blog")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/project",activeClassName:"active"},"Projects")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/about",activeClassName:"active"},"About Me"))))}}]),t}(a.Component)),y=n(12),E=n.n(y),b=(n(34),n(35),n(37),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(this.props.styleName)},r.a.createElement("div",{className:"terminal"},r.a.createElement("ul",{className:"terminal-dots"},r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)),r.a.createElement("pre",null,r.a.createElement("code",{className:"language-".concat(this.props.language)},this.props.code))))}}]),t}(a.Component)),v=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){E.a.highlightAll()}},{key:"render",value:function(){return r.a.createElement(b,{language:"java",styleName:this.props.styleName,code:this.props.code})}}]),t}(a.Component),w=n(14),C=(n(39),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=w.test,t=w.impl;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"left-pad"}),r.a.createElement(v,{styleName:"test",code:e}),r.a.createElement(v,{styleName:"impl",code:t}),r.a.createElement("div",{className:"right-pad"}))}}]),t}(a.Component)),S=n(22),A=n.n(S),T=(n(41),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement(C,null),r.a.createElement("div",{className:"photo-container"},r.a.createElement("img",{className:"photo",src:A.a,alt:"dapper-icon"})))}}]),t}(a.Component)),I=(n(43),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){E.a.highlightAll()}},{key:"render",value:function(){return r.a.createElement(b,{language:"groovy",styleName:this.props.styleName,code:this.props.code})}}]),t}(a.Component)),k=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"left-pad"}),this.props.test,this.props.impl,r.a.createElement("div",{className:"right-pad"}))}}]),t}(a.Component),O=n(23),j=n(15),N=n(16),x=n(10),M=(n(44),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"posts"},r.a.createElement("h3",null,"20181010"),r.a.createElement("h2",null,"Setting Up Custom Trace/Spans with Spring Boot and Spring Cloud Sleuth"),r.a.createElement("div",null,r.a.createElement("h3",null,"Overview:"),r.a.createElement("p",null,"You have got your Spring Boot app up and running and now you want to add some metrics...great! That's the right thing to do. At the end of the day metrics will help you understand how your application is actually being used. Often times developers and product managers have a general idea of what they want to put in front of customers, but they often end up focusing on the wrong things or overlooking key things the user is showing through their behavior due to pre-disposed biases on \"Knowing what the customer wants\". Metrics are the tool that will separate the signal from the noise and let you make decisions on behaviors that drive usage of a feature vs the chaos of whackamole feature development that invariably ends up in selling vaporware to keep your stakeholders feeling like progress is just around the corner. Additionally we've all been part of those emotionally charged debates in your Retros and Techtros. By having higher sources of truth you can start basing decisions on facts and not chase moving targets."),r.a.createElement("p",null,"There is a certain level of testing, analysis, and iteration we need in order to valdiate our approach. Just like in the field of data-science, you can measure anything and make metrics tell you an answer, it just may not be to the right question. Making sure you are asking the right question is a conversation in itself....I digress. A conversation for another day."),r.a.createElement("p",null,"Let's show how we get metrics up on your Spring app so we can start answering our own questions.")),r.a.createElement("div",null,r.a.createElement("h3",null,"Getting the Tools"),r.a.createElement("p",null,"We'll create a Spring Boot app using the Spring Boot CLI. You can alternatively navigate to ",r.a.createElement("a",{href:"https://start.spring.io"},"start.spring.io")," which will generate a zip for you that we can work from."),r.a.createElement("p",null,"I am a big fan of working from the terminal so I'll show you how to go that route. We'll start by installing the Spring Boot CLI"),r.a.createElement("h4",null,"Mac:"),r.a.createElement("p",null,"Using Homebrew install with the commmand ",r.a.createElement("code",null,"brew tap pivotal/tap && brew install springboot")),r.a.createElement("h4",null,"Windows:"),r.a.createElement("p",null,"Using scoop to install run:"),r.a.createElement("span",null,r.a.createElement("code",null,"scoop bucket add extras")),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("code",null,"scoop install springboot")),r.a.createElement("h4",null,"Manual:"),r.a.createElement("p",null,"You can download the Spring CLI distribution from the ",r.a.createElement("a",{href:"https://repo.spring.io/release/org/springframework/boot/spring-boot-cli"},"Spring software repository"),": Download a Zip or tarball from the above URL using the latest RELEASE Cutting edge snapshot distributions are also available. Once downloaded, follow the INSTALL.txt instructions from the unpacked archive. In summary, there is a spring script (spring.bat for Windows) in a bin/ directory in the .zip file. Alternatively, you can use java -jar with the .jar file (the script helps you to be sure that the classpath is set correctly).")),r.a.createElement("div",null,r.a.createElement("h3",null,"Creating the App"),r.a.createElement("p",null,"From your working directory run: ",r.a.createElement("code",null," spring init --build=gradle -g=rocks.mcnichol -d=web,cloud-starter-sleuth my-app")),r.a.createElement("p",null,"This creates a folder named ",r.a.createElement("code",null,"my-app")," which will have the skeleton of your project. Going inside that directory you will find that you have a build.gradle file which should look similar to this:"),r.a.createElement(I,{code:O.groovy}),r.a.createElement("p",null,"Looks great!"),r.a.createElement("p",null,"A clean gradle file is something worth appreciating, gotta give credit where credit is due. One thing that is subtle but really important for how I like to maintain my build scripts is that they extracted the springBootVersion and springCloudVersion into variables. Often what I ultimately will do is source these from a variables file making it easy for me to keep things updated. Bravo Spring Team!"),r.a.createElement("p",null,"I advocate for Gradle because the groovy scripting underneath opens you up to significant flexibility. The problem (and I've had this conversation with many junior devs) is that you can get away with so much that at some point your hands are tied and everything you touch seems to break something else making it appear brittle."),r.a.createElement("p",null,"Somewhere around this point is where I see a dev throw their hands up in despair and blame the tool which I find somewhat unfair. If anything, I'd argue the problem is that the gradle structure has so many disparate tasks that are somewhat unobvious. To the untrained developer it is all magic working in the background. Short of valid syntax, there is limited clarity on the errors or side-effects that you have created and you lay at the mercy of documentation...which every camp suffers from in one way or another. Arguably one can say this is what your IDE is for. The alternative being Maven (which many of the greats I respect immensely wave the banner for, I just can't love XML for my build tooling. It reminds me of a quote I heard: \"XML is like violence, if you aren't getting the results you want, you probably aren't using enough.\""),r.a.createElement("p",null,"My rule at the end of the day is if you want to deviate, you should have a high tolerance for pain. A truly admirable trait in any developer!"),r.a.createElement("p",null,"Now we let's load up the Spring Boot application. Using the Spring Boot CLI the skeleton is there with a runnable application. I typically set my app in a side-by-side, test on the left, implementation on the right like below:"),r.a.createElement(k,{test:r.a.createElement(v,{code:j.test}),impl:r.a.createElement(v,{code:j.impl})}," "),r.a.createElement("p",null,"In order to see the Trace and Span Id's made from Spring Cloud Sleuth, we need to hit an endpoint and fire off a log message. We can start with a few tests, then write the implementation."),r.a.createElement("p",null,"At this point we have the basics of spinning up a simple application with the skeleton sitting in front of our repo. From here on we'll be pretty brief with the import statements at the top of our code alongside not being repetitive with code, only showing the parts that are new. To see the complete application you can see the working ",r.a.createElement("a",{href:"https://github.com/mcnichol/spring-sleuth-custom-logging.git"},"Custom Spring Trace App")," in Github.")),r.a.createElement("div",null,r.a.createElement("h3",null,"Test Driving the App"),r.a.createElement("p",null,"Because this is not about test driving a RestController, we are going to assume that this was already driven out through tests (although we will certainly test our way through that in other blogs as there are a few tools I've made to make that process a little bit cleaner alongside many of the things afforded to you by Spring). Here is the code below that should exist:"),r.a.createElement(k,{test:r.a.createElement(v,{code:N.test}),impl:r.a.createElement(v,{code:N.impl})}," ")),r.a.createElement("div",null,r.a.createElement("h3",null,"Testing our controller for a Custom trace Span"),r.a.createElement("p",null,"I'm going to assume you know what a trace and span, otherwise you probably wouldn't be here but for complete-ness you can read up on it at the [Spring documentation site](https://cloud.spring.io/spring-cloud-sleuth/single/spring-cloud-sleuth.html)."),r.a.createElement("p",null,"TL;DR - It adds a unique ID to each Request/Response and provides some tooling to visualize this flow for traceability."),r.a.createElement("p",null,"What happens when you need to customize this. Your engineers now need to follow some pattern your organization has picked up in logging. You may need to modify the logging pattern because when it randomly shows up as all 16 digits (which it will) it flags your security scans with a false positive appearing like the PII of Credit Cards showing up in logs!!!"),r.a.createElement("p",null,"Not a big deal but the simple solution can be un-obvious. Let's write a test and then I will show you two ways to implement this. The test is slightly tricky for new TDD'ers but it will highlight a key concept in the ",r.a.createElement("a",{href:"https://12factor.net/"},"12 Factor App")," model - ",r.a.createElement("a",{href:"https://12factor.net/logs"},"XI Logs as Event Streams"),"."),r.a.createElement("h4",null,r.a.createElement("code",null,"AppControllerIntegrationTest.java")),r.a.createElement(v,{code:x.test}),r.a.createElement("p",null,"That was it?"),r.a.createElement("p",null,"Yes. At the end of the day we operate with the understanding that our logs are streams of data and they should be saved off to some store where they can be later indexed, parsed, and searched in near realtime. This is typically done using platforms like Kibana, Splunk, or S3 Glacier stores. If you are using a PaaS like PCF, all of this forwarding of logs is done transparently to the AppDev whereas running your own Webserver you will be responsible for forwarding these logs on to whatever final resting place. What we have done in our test is merely shortcut the system and instead of logging out to the console, we are merely intercepting ",r.a.createElement("code",null,"System.out")," and dumping to a ByteArrayOutputStream wrapped in a PrintStream."),r.a.createElement("p",null,"Let's throw together an even simpler implementation."),r.a.createElement("h3",null,"Solution 1:"),r.a.createElement("h4",null,r.a.createElement("code",null,"application.yml")),r.a.createElement(I,{code:x.impl1}),r.a.createElement("p",null,"As I mentioned, it's going to be so easy, it's merely a one-liner. In your application.yml file under ",r.a.createElement("code",null,"src > main > resources")," folder you can add this. If you are familiar with configuration of logback in your Java applications, you will find this is pretty straightforward. If not, just know it's a fairly common pattern and should you want to customize your logs, you could do something relatively similar. ",r.a.createElement("a",{href:"https://logback.qos.ch/manual/index.html"},"[Logback Docs]")),r.a.createElement("h3",null,"Solution 2:"),r.a.createElement("p",null,"In this approach it will be slightly more involved so I'll explain first. We are going to implement our own ",r.a.createElement("code",null,"CurrentTraceContext")," and supply it to Spring. When Spring is injecting all of the dependencies it will be asked for an slf4jSpanLogger. Instead of supplying the default we will instead provide it our own implementation as shown below in the application config. In our apps config we return our CustomTraceContext letting us modify the logging behavior which can be seen when in the ",r.a.createElement("code",null,"newScope()")," method"),r.a.createElement("h4",null,r.a.createElement("code",null,"AppConfig.java")),r.a.createElement(v,{code:x["impl2-config"]}),r.a.createElement("h4",null,r.a.createElement("code",null,"CustomTraceContext.java")),r.a.createElement(v,{code:x.impl2})))}}]),t}(a.Component)),_=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"About")}}]),t}(a.Component),L=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Projects")}}]),t}(a.Component),D=n(53),R=n(51),P=(n(46),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement(D.a,null,r.a.createElement(R.a,{exact:!0,path:"/",component:T}),r.a.createElement(R.a,{path:"/blog",component:M}),r.a.createElement(R.a,{path:"/project",component:L}),r.a.createElement(R.a,{path:"/about",component:_})))}}]),t}(a.Component));n(48);i.a.render(r.a.createElement(c.a,null,r.a.createElement(P,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");l?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):s(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):s(e)})}}()}],[[24,2,1]]]);
//# sourceMappingURL=main.4a160b65.chunk.js.map