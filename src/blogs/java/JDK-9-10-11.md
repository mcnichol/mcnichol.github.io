# JDK 9 10 11

* JDK 1.0 had merely a handful of Classes (100s)
* Latest JDK has thousands of Classes (4.5k)
* There are many internal API's that were built to support these classes, they were never meant to be used (Not documented etc)

## jlink
* Java Linker (JEP 282)
`$ jlink --modulepath $JDKMODS --addmods java.base -output myimage`
`$ myimage/bin/java --list-modules`
`java.base@9`

`$ jlink --modulepath $JDKMODS:$MYMODS --addmods com.azul.zapp -output myimage`
`$ myimage/bin/java --list-modules`
```
java.base@9
...
```

Oracle wants to move Java forward faster

### JDK Development takes time
* JDK6: 2y2mo after JDK5
* JDK7: 4y8mo after
* JDK8: 2y

### Migrating to a new version
* JDK6: 2y11mo of public JDK5 updates
* JDK7: 1y9mo of public JDK6 updates
* JDK8: 1y1mo JDK7 updates
* Allows  stabilisation of new platform before migrating


### Java platform today is:
* Stable
* Secure 
    * A few years ago, security needed to be addressed
    * Every 3 months security updates rolled out.  (Meltdown, Spectre), bugfies, patches
* Free

OpenJDK - New Release Model
* New JDK every 6 months
  * March (JDK 10) and September (JDK 11)
* This was needed to make JDK more agile.
* Features now get added as they are completed
  * Previously JDK was only shipped when Features targetted for release were ready. Great example is Java9 with modularity

### LTS Model
* Long term support for all releases not practical
* One LTS every three years
* JDK8 is first LTS
  * JDK8 public updates stop January 2019 for Commercial Users
  * Non Commercial users get updates until December 2020

### JDK 11 is next LTS
* JDK9 and 10 are feature releases

### JDK Binary
* Traditional Oracle branded binary (java.oracle.com)
* Oracle Binary (Field of Use restrictions)

* New OpenJDK Binary (jdk.java.net)
* GPLv21 with CPE license (no restrictions)
* Security and bug fix updates only for six months
  * Only until next JDK
  * Two scheduled updates

OracleJDK (Commercial Features-> OpenJDK (Has Nashorn) -> JavaSE
Opensourced JDK Parts
* Flight recorder
* Mission Control
* Others

Closed Source Parts Removed
* Browser Plugin
* JavaWebStart
* JavaFX

JDK - 23 years of technical debt

Java is to JavaScript as Car is to Carpet

### Eliminating Confusion
* There will be LTS every three years
  * Not 3 years of free updates
* Oracle JDK 11 can only be used in production with Commerical License

* Stable | Secure | Free - Choose two of the three

JEP 286
* var - Type Inference
* JEP 307 -= Parallel Full GC for G1
* JEP 310 - Application Class-Data Sharing
* JEP 317 - Experimental Java-based JIT compiler (Graal)
* JEP 319 - Root Certificates (Consolidating Certificates from versions and Oracle)
* JEP 296 - Consolidate JDK forests into single repo
*
* JDK 10:
* JEP 316 - Heap allocation on alte devices (intel)
* JEP 313 - Remove javah tool
* JEP 304 Garbace Collector interface (Red Hat)
* JEP 312 - Thread-Local Handshakes (Improving performance with individual threads and not impacting all threads)
* 73 New APIs

JDK 11
* 17 JEPS
* 3 from outside Oracle
* JEP 318 - Epsilon Garbage Collector
  * non-collecting GC
  * Allocates memory but never reclaims unused
  * When mem exhaused, JVM exits
    * OOME
    * Can perform Heap Dump
    * Can perform External Actions
* JEP 315 - 
* JEP 309 - Dynamic Class File Constants
  * Similar to final, can be set once but cannot be changed
* JEP 321 - HTTP Client (Standard)
  * Incubator module for HTTP/2 support in JSE
  * Sync/Async modes
  * java.net.http (HttpClient, HttpRequest, HttpResponse, WebSocket)
* JEP 323 - Extend Local-Variable syntax
  * When wanting to add annotations, you must have types.  This allows var to be leveraged for using @NotNull, etc
* JEP 327 - 8,518 new characters - Unicode
* JEP 330 - Launch Single File Source Code
  * JDK 10 has three modes for Java Launcher: Launch Class, Launch main class of JAR, Launch main class of module
  * JDK 11 adds a fourth 
* JEP 315 - Improve Aarch 64
* JEP 326 - Key Agreement with Curve25519 and Curve 448
* 329 ChaCha20 and Poly1305 Cryptographic Algorithms
* 331
* 332  TLS 1.3
* 333 Zero Garbabe Collector
* 335 Deprecate Nashorn
* 336 Depreacte Pack200 Tools API
* New I/O (InputStream nullInputStream(), OutputStream nullOutputStream, Reader nullReader, Writer nullWriter
* String

### OpenJDK Projects
* Amber - Simplifying syntax
  * JEP 302 - Lambda Leftovers (_) for unused parameters
  * JEP 326 - Raw String literals (JDK 12) - Use single backquote
  * JEP 306 Pattern Matching - Type test and switch statement support
  * JEP 325 Switch Expressions (JDK 12)
* Valhalla Value type and specialized generics
  * Value types, "Codes like a class, works like a primitive"
* Loom - Continuations and fibres
  * Improve performance of multi-thread applications
  * Threads are too heavyweight, fibres will map hundreds of Java Threads
  * JVM Level Threads
  * Uses ForkJoinPool scheduler
  * Much lighter weight than threads (Less memory, close to zero overhead for task switching)
* Metropolis - Run Java on Java
  * Rewrite most of the JVM in Java
  * Use Graal compiler project as significant input
  * Easier ports to new platforms
